import{c as U,d as H,j as s,a5 as W,p as F,a6 as J,a1 as Z,$ as _e,a7 as se,a8 as ee,a9 as te,U as xe,v as ue,aa as we,r as he,ab as Se,ac as ce,ad as oe,ae as De,k as B,af as Ae,N as Ie,ag as Ce,f as ke,e as K,g as V,ah as Me,ai as Le,aj as Re,ak as $e,al as Ee,am as Ge,i as X,b as ge,n as be,T as je,m as ve,h as ye,an as Te,ao as ze,ap as Pe,aq as Oe,ar as de,as as Fe,at as He,au as ae,av as Ve,aw as me,ax as Be,ay as qe,az as Qe,aA as Ue,aB as Ke,aC as Xe,L as Ye,aD as Ze,aE as We,aF as Je,a3 as et,a4 as tt}from"./client-snyaW0Tu.js";import{u as st,B as at,S as le,a as Y,r as q}from"./useMergeDocuments-VX2MlBXB.js";import{l as lt,G as $}from"./RentalApproval-Bbii3zj-.js";import{B as rt}from"./building-Bq2iw4zI.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],pe=U("Ban",nt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],re=U("CircleCheck",it);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fe=U("CircleX",ct);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ne=U("Download",ot);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ne=U("FileText",dt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],pt=U("Trash2",mt),ft=()=>{const e=H.c(15),{documents:t,mergeDocuments:a}=st(),r=xt;let l;e[0]!==a?(l=()=>{if(!a||a.length===0)return{variant:"destructive",text:"Manquants",icon:s.jsx(Z,{className:"mr-1 h-3 w-3"})};const c=a.every(ut),o=a.some(ht);return c?{variant:"default",text:"Complets",status:"allComplete",icon:s.jsx(_e,{className:"mr-1 h-3 w-3"})}:o?{variant:"peach",text:"En cours",status:"hasPartialProgress",icon:s.jsx(se,{className:"mr-1 h-3 w-3"})}:{variant:"destructive",text:"Manquants",icon:s.jsx(Z,{className:"mr-1 h-3 w-3"})}},e[0]=a,e[1]=l):l=e[1];const f=l;let p;e[2]!==f?(p=f(),e[2]=f,e[3]=p):p=e[3];const x=p,b=t&&t?.length>0;let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 rounded-full bg-muted",children:s.jsx(Ne,{className:"h-5 w-5 text-secondary"})}),s.jsx(ee,{className:"text-lg",children:"Documents"})]}),e[4]=u):u=e[4];let d;e[5]!==x.icon||e[6]!==x.text||e[7]!==x.variant?(d=s.jsxs(W,{className:"flex flex-row items-center justify-between pb-2",children:[u,s.jsxs(F,{variant:x.variant,children:[x.icon,x.text]})]}),e[5]=x.icon,e[6]=x.text,e[7]=x.variant,e[8]=d):d=e[8];let n;e[9]!==b||e[10]!==a?(n=s.jsx(J,{children:b?s.jsx("div",{children:a?.map(c=>s.jsxs("div",{className:"mb-6 last:mb-0",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Documents requis pour ",c.person.naturalEntity.firstName," ",c.person.naturalEntity.lastName," :"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:c.requiredDocuments.map((o,i)=>s.jsxs("div",{className:"flex items-center justify-between rounded-md bg-muted p-3 border border-border",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-sm",children:o.requestedDocument.nameI18nCode}),o.minRequired>1&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.count,"/",o.minRequired," documents fournis"]})]}),r(o.isComplete,o.count)]},i))})]},c.person.id))}):s.jsxs("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Z,{className:"h-4 w-4 text-destructive"}),s.jsx("p",{className:"text-sm font-medium text-destructive",children:"Aucun fichier déposé"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Veuillez télécharger les documents requis pour finaliser la demande."})]})}),e[9]=b,e[10]=a,e[11]=n):n=e[11];let h;return e[12]!==d||e[13]!==n?(h=s.jsxs(te,{className:"border border-border shadow-sm",children:[d,n]}),e[12]=d,e[13]=n,e[14]=h):h=e[14],h};function xt(e,t){return e?s.jsx(F,{variant:"default",children:"Complet"}):t>0?s.jsx(F,{variant:"peach",children:"Incomplet"}):s.jsx(F,{variant:"lightRed",children:"À fournir"})}function ut(e){return e.completedTypes===e.totalTypes}function ht(e){return e.completedTypes>0}const gt=e=>{const t=H.c(19),{owners:a,realEstateLot:r}=e;let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsxs(W,{className:"flex flex-row items-center space-x-3 pb-2",children:[s.jsx("div",{className:"p-2 rounded-full bg-muted",children:s.jsx(at,{className:"h-5 w-5 text-secondary"})}),s.jsx(ee,{className:"text-lg",children:"Propriétaire et lot"})]}),t[0]=l):l=t[0];let f;t[1]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nom du propriétaire"}),t[1]=f):f=t[1];let p;t[2]!==a?(p=a?.map(bt),t[2]=a,t[3]=p):p=t[3];let x;t[4]!==p?(x=s.jsxs("div",{children:[f,p]}),t[4]=p,t[5]=x):x=t[5];let b;t[6]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Type du bien"}),t[6]=b):b=t[6];let u;t[7]!==r?.type?(u=r?.type?lt(r?.type):"N/A",t[7]=r?.type,t[8]=u):u=t[8];let d;t[9]!==u?(d=s.jsxs("div",{children:[b,s.jsx(F,{children:u})]}),t[9]=u,t[10]=d):d=t[10];let n;t[11]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(ue,{}),t[11]=n):n=t[11];let h;t[12]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 ",children:[s.jsx(we,{className:"h-4 w-4"}),"Adresse du lot"]}),t[12]=h):h=t[12];const c=r?.address?.fullAddress;let o;t[13]!==c?(o=s.jsxs("div",{children:[h,s.jsx("p",{className:"font-medium",children:c})]}),t[13]=c,t[14]=o):o=t[14];let i;return t[15]!==o||t[16]!==x||t[17]!==d?(i=s.jsxs(te,{className:"col-span-1 border border-border shadow-sm",children:[l,s.jsxs(J,{className:"space-y-4",children:[x,d,n,o]})]}),t[15]=o,t[16]=x,t[17]=d,t[18]=i):i=t[18],i};function bt(e,t){return s.jsxs("div",{className:"flex items-center gap-2",children:[e.naturalEntity?s.jsx(xe,{className:"h-3 w-3"}):s.jsx(rt,{className:"h-3 w-3"}),s.jsx("span",{className:"text-sm",children:e.naturalEntity?`${e.naturalEntity.firstName} ${e.naturalEntity.lastName}`:e.legalEntity?.name||"Inconnu"})]},e.id)}const jt=e=>{const t=H.c(14),{tenants:a}=e;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Set,t[0]=r):r=t[0];const[l,f]=he.useState(r),p=vt;let x;t[1]!==l?(x=i=>{const m=new Set(l);m.has(i)?m.delete(i):m.add(i),f(m)},t[1]=l,t[2]=x):x=t[2];const b=x;let u;t[3]===Symbol.for("react.memo_cache_sentinel")?(u={1:"CDI/Fonctionnaire",2:"CDD",3:"Intérimaire",4:"Indépendant",5:"Chef d'entreprise",6:"Libéral",7:"Retraité",8:"Étudiant",9:"Demandeur d'emploi",10:"Autre",11:"Apprenti",12:"Stagiaire",13:"Période d'essai"},t[3]=u):u=t[3];const d=u;let n;t[4]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsxs(W,{className:"flex flex-row items-center space-x-3 pb-2",children:[s.jsx("div",{className:"p-2 rounded-full bg-muted",children:s.jsx(xe,{className:"h-5 w-5 text-secondary"})}),s.jsx(ee,{className:"text-lg",children:"Locataire"})]}),t[4]=n):n=t[4];let h;t[5]!==a.length?(h=a.length===0&&s.jsx("div",{className:"text-center",children:"Aucun Locataire n'a été ajouté"}),t[5]=a.length,t[6]=h):h=t[6];let c;t[7]!==l||t[8]!==a||t[9]!==b?(c=a?.map(i=>s.jsx(Se,{children:s.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ce,{className:"h-8 w-8",children:s.jsx(oe,{className:"text-xs bg-primary/10",children:p(i.tenant.naturalEntity.firstName,i.tenant.naturalEntity.lastName)})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-sm",children:[i.tenant.naturalEntity.firstName," ",i.tenant.naturalEntity.lastName]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(F,{variant:"secondary",className:"text-xs px-2 py-0",children:d[i.professionalStatus]})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(F,{variant:"outline",className:"text-xs",children:[i.guarantors.length," garant",i.guarantors.length>1?"s":""]}),s.jsx(De,{asChild:!0,children:s.jsx(B,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>b(i.id),children:l.has(i.id)?s.jsx(Ae,{className:"h-4 w-4"}):s.jsx(Ie,{className:"h-4 w-4"})})})]})]}),s.jsx(Ce,{children:s.jsxs("div",{className:"space-y-2 border-t pt-2",children:[s.jsxs("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[s.jsx(le,{className:"h-3 w-3"}),s.jsx("span",{children:"Garants"})]}),s.jsx("div",{className:"grid gap-2",children:i.guarantors.map(m=>s.jsx("div",{className:"flex items-center justify-between bg-muted/30 rounded p-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ce,{className:"h-6 w-6",children:s.jsx(oe,{className:"text-xs bg-muted",children:p(m.guarantor.naturalEntity.firstName,m.guarantor.naturalEntity.lastName)})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs font-medium",children:[m.guarantor.naturalEntity.firstName," ",m.guarantor.naturalEntity.lastName]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d[m.professionalStatus]})]})]})},m.id))})]})})]})},i.id)),t[7]=l,t[8]=a,t[9]=b,t[10]=c):c=t[10];let o;return t[11]!==h||t[12]!==c?(o=s.jsxs(te,{className:"col-span-1 border border-border shadow-sm",children:[n,s.jsxs(J,{className:"space-y-4",children:[h,c]})]}),t[11]=h,t[12]=c,t[13]=o):o=t[13],o};function vt(e,t){return`${e.charAt(0)}${t.charAt(0)}`.toUpperCase()}const yt=e=>{const t=H.c(24),{businessData:a}=e;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsxs(W,{className:"flex flex-row items-center space-x-3 pb-2",children:[s.jsx("div",{className:"p-2 rounded-full bg-muted",children:s.jsx(Ne,{className:"h-5 w-5 text-secondary"})}),s.jsx(ee,{className:"text-lg",children:"Bail"})]}),t[0]=r):r=t[0];let l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Type de location"}),t[1]=l):l=t[1];const f=a?.hasFurnished?"Meublé":"Non meublé";let p;t[2]!==f?(p=s.jsxs("div",{children:[l,s.jsx("p",{className:"font-medium",children:f})]}),t[2]=f,t[3]=p):p=t[3];let x;t[4]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Type de bail"}),s.jsx(F,{variant:"outline",children:"Habitation"})]}),t[4]=x):x=t[4];let b;t[5]!==p?(b=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p,x]}),t[5]=p,t[6]=b):b=t[6];let u;t[7]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Occupation préalable"}),t[7]=u):u=t[7];const d=a?.sittingTenant?"Locataire entrant":"Locataire en place";let n;t[8]!==d?(n=s.jsxs("div",{children:[u,s.jsx("p",{className:"font-medium",children:d})]}),t[8]=d,t[9]=n):n=t[9];let h;t[10]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx(ue,{}),t[10]=h):h=t[10];let c;t[11]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.jsx("span",{className:"text-sm font-medium text-accent-foreground",children:"Loyer mensuel charges comprises"})}),t[11]=c):c=t[11];const o=a?.rentAmount&&a?.chargesAmount?a?.rentAmount+a?.chargesAmount:"-";let i;t[12]!==o?(i=s.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[o," €"]}),t[12]=o,t[13]=i):i=t[13];const m=a?.rentAmount?a?.rentAmount:"-",y=a?.chargesAmount?a?.chargesAmount:"-";let g;t[14]!==m||t[15]!==y?(g=s.jsxs("p",{className:"text-xs text-muted-foreground",children:["dont ",m," € de loyer et"," ",y," € de charges"]}),t[14]=m,t[15]=y,t[16]=g):g=t[16];let j;t[17]!==i||t[18]!==g?(j=s.jsxs("div",{className:"rounded-lg bg-accent/30 p-4 border border-accent/50",children:[c,i,g]}),t[17]=i,t[18]=g,t[19]=j):j=t[19];let v;return t[20]!==j||t[21]!==b||t[22]!==n?(v=s.jsxs(te,{className:"col-span-1 border border-border shadow-sm",children:[r,s.jsxs(J,{className:"space-y-4",children:[b,n,h,j]})]}),t[20]=j,t[21]=b,t[22]=n,t[23]=v):v=t[23],v},Nt=()=>{const e=H.c(48),t=ke(),a=K(),r=Y();let l;e[0]!==a?(l=X({data:{},params:{}},a),e[0]=a,e[1]=l):l=e[1];const f=l,{data:p}=V(f);let x;e[2]!==p?.id||e[3]!==a||e[4]!==r.ID_rentalapproval?(x=q({data:{},params:{rentalApprovalId:r.ID_rentalapproval,subscriptionId:p?.id}},a),e[2]=p?.id,e[3]=a,e[4]=r.ID_rentalapproval,e[5]=x):x=e[5];const b=x,u=!!r.ID_rentalapproval&&!!p?.id;let d;e[6]!==b||e[7]!==u?(d={...b,enabled:u},e[6]=b,e[7]=u,e[8]=d):d=e[8];const{data:n}=V(d);let h;const c=n,o=c?.status;let i;e[9]===Symbol.for("react.memo_cache_sentinel")?(i=[$.PendingDocument,$.Draft],e[9]=i):i=e[9];const m=i.includes(o),y=!!(m&&c?.owners&&c.owners.length>0);let g;e[10]!==y?(g={id:1,label:"Propriétaire",isCompleted:y},e[10]=y,e[11]=g):g=e[11];let j;e[12]!==m||e[13]!==c?(j=m&&c?.realEstateLot&&Object.keys(c.realEstateLot).length>0,e[12]=m,e[13]=c,e[14]=j):j=e[14];const v=!!j;let N;e[15]!==v?(N={id:2,label:"Logement",isCompleted:v},e[15]=v,e[16]=N):N=e[16];let A;e[17]!==m||e[18]!==c?(A=m&&c?.businessData&&Object.keys(c.businessData).length>0,e[17]=m,e[18]=c,e[19]=A):A=e[19];const w=!!A;let _;e[20]!==w?(_={id:3,label:"Bail",isCompleted:w},e[20]=w,e[21]=_):_=e[21];const D=!!(m&&c?.tenants&&c.tenants.length>0);let S;e[22]!==D?(S={id:4,label:"Locataire",isCompleted:D},e[22]=D,e[23]=S):S=e[23];let C;e[24]===Symbol.for("react.memo_cache_sentinel")?(C={id:5,label:"Documents",isCompleted:!1},e[24]=C):C=e[24];let L;e[25]!==N||e[26]!==_||e[27]!==S||e[28]!==g?(L=[g,N,_,S,C],e[25]=N,e[26]=_,e[27]=S,e[28]=g,e[29]=L):L=e[29],h=L;const I=h;let P;e[30]!==I?(P=I.filter(_t),e[30]=I,e[31]=P):P=e[31];const E=P.length;let T;e[32]!==E||e[33]!==I.length?(T=Math.round(E/I.length*100),e[32]=E,e[33]=I.length,e[34]=T):T=e[34];const G=T;let O;e[35]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(se,{className:"h-5 w-5 text-secondary"}),s.jsx("h3",{className:"text-xl font-semibold",children:"Progression du dossier"})]}),e[35]=O):O=e[35];let k;e[36]!==t||e[37]!==r.ID_rentalapproval?(k=s.jsxs("div",{className:"flex items-center justify-between",children:[O,s.jsx(B,{onClick:()=>{t({to:"/creategli/$ID_rentalapproval",params:{ID_rentalapproval:r.ID_rentalapproval}})},children:"Completer le dossier"})]}),e[36]=t,e[37]=r.ID_rentalapproval,e[38]=k):k=e[38];let R;e[39]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx("span",{className:"text-muted-foreground",children:"Complétion : "}),e[39]=R):R=e[39];let M;e[40]!==G?(M=s.jsx("div",{className:"relative pt-1",children:s.jsxs("div",{className:"flex mb-2 items-center  text-sm space-x-2",children:[R,s.jsxs("span",{className:"font-medium",children:[G,"%"]})]})}),e[40]=G,e[41]=M):M=e[41];let z;e[42]!==I?(z=s.jsx("div",{className:"overflow-scroll",children:s.jsx(Me,{orientation:"horizontal",children:I.map(wt)})}),e[42]=I,e[43]=z):z=e[43];let Q;return e[44]!==k||e[45]!==M||e[46]!==z?(Q=s.jsxs("div",{className:"mb-8 p-6 rounded-lg border border-border bg-card shadow-sm",children:[k,M,z]}),e[44]=k,e[45]=M,e[46]=z,e[47]=Q):Q=e[47],Q};function _t(e){return e.isCompleted}function wt(e){return s.jsx(Le,{step:e.id,className:"group-data-[orientation=vertical]/timeline:ms-10 group-data-[orientation=vertical]/timeline:not-last:pb-8",children:s.jsxs(Re,{children:[s.jsx($e,{className:"group-data-[orientation=vertical]/timeline:-left-7 group-data-[orientation=vertical]/timeline:h-[calc(100%-1.5rem-0.25rem)] group-data-[orientation=vertical]/timeline:translate-y-6.5"}),s.jsx(Ee,{className:"mt-0.5",children:e.label}),s.jsx(Ge,{className:"flex size-6 items-center justify-center border-none group-data-[orientation=vertical]/timeline:-left-7",children:e.isCompleted?s.jsx(re,{className:"h-4 w-4 text-primary"}):s.jsx(Z,{className:"h-4 w-4 text-destructive"})})]})},e.id)}const St=ge("rentalapprovals/activateGliUsecase",async(e,{dispatch:t,extra:a})=>{const{rentalApprovalApi:r,queryClient:l}=a;try{const f=q({data:{},params:{rentalApprovalId:e.params.rentalApprovalId,subscriptionId:e.params.subscriptionId}},t);await r.postActivateGli(e),l.invalidateQueries({queryKey:["rentalApprovals","subscription",e.params.subscriptionId],exact:!1}),l.invalidateQueries(f);return}catch(f){throw t(be({typeMessage:je.errorApi})),f}}),Dt=e=>ve({mutationKey:["activeGli"],mutationFn:async t=>await e?.(St(t)).unwrap()});function ie(e){const t=new Date,a=f=>new Date(f.getFullYear(),f.getMonth(),f.getDate()),r=Math.round((a(t).getTime()-a(e).getTime())/864e5);let l;return r===0?l="aujourd'hui":r===1?l="hier":r>1?l=`il y a ${r} jours`:r===-1?l="demain":l=`dans ${Math.abs(r)} jours`,l}const At=()=>{const e=H.c(51),t=K(),a=Y();let r;e[0]!==t?(r=X({data:{},params:{}},t),e[0]=t,e[1]=r):r=e[1];const l=r,{data:f}=V(l);let p;e[2]!==f?.id||e[3]!==t||e[4]!==a.ID_rentalapproval?(p=q({data:{},params:{rentalApprovalId:a.ID_rentalapproval,subscriptionId:f?.id}},t),e[2]=f?.id,e[3]=t,e[4]=a.ID_rentalapproval,e[5]=p):p=e[5];const x=p,b=!!a.ID_rentalapproval&&!!f?.id;let u;e[6]!==x||e[7]!==b?(u={...x,enabled:b},e[6]=x,e[7]=b,e[8]=u):u=e[8];const{data:d}=V(u);let n;e[9]!==t?(n=Dt(t),e[9]=t,e[10]=n):n=e[10];const c=ye(n);let o;e[11]!==c||e[12]!==f?.id||e[13]!==a.ID_rentalapproval?(o=async Q=>{await c.mutateAsync({data:Q,params:{rentalApprovalId:a.ID_rentalapproval,subscriptionId:f?.id}})},e[11]=c,e[12]=f?.id,e[13]=a.ID_rentalapproval,e[14]=o):o=e[14];const i=o,[m,y]=he.useState(!1);let g;e[15]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{y(It)},e[15]=g):g=e[15];const j=g;let v;e[16]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx("div",{className:"rounded-full bg-primary p-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",children:s.jsxs("g",{fill:"#fffefe",children:[s.jsx("path",{d:"M32.707 22.707a1 1 0 0 0-1.414-1.414L24 28.586l-3.293-3.293a1 1 0 0 0-1.414 1.414L24 31.414z"}),s.jsx("path",{fillRule:"evenodd",d:"M38 15v21a3 3 0 0 1-3 3H17a3 3 0 0 1-3-3V8a3 3 0 0 1 3-3h11zm-10 1a1 1 0 0 1-1-1V7H17a1 1 0 0 0-1 1v28a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V16zm1-7.172L34.172 14H29z",clipRule:"evenodd"}),s.jsx("path",{d:"M12 11v27a3 3 0 0 0 3 3h19v2H15a5 5 0 0 1-5-5V11z"})]})})}),e[16]=v):v=e[16];let N;e[17]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Demande acceptée avec succès !"}),e[17]=N):N=e[17];let A;e[18]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[N,s.jsxs(F,{variant:"default",children:[s.jsx(re,{className:"mr-1 h-3 w-3"}),"Acceptée"]})]}),e[18]=A):A=e[18];let w;e[19]!==d?(w=d?.guaranteeDeadline?new Date(d.guaranteeDeadline).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"}):"-",e[19]=d,e[20]=w):w=e[20];let _;e[21]!==w?(_=s.jsxs("p",{className:"text-muted-foreground mb-4",children:["Votre demande de certification a été approuvée. Vous avez jusqu'au"," ",s.jsx("span",{className:"font-medium text-foreground",children:w})," ","pour mettre le lot en garantie."]}),e[21]=w,e[22]=_):_=e[22];let D;e[23]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsxs(B,{className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:j,children:[s.jsx(le,{className:"mr-2 h-4 w-4"}),"Mettre en garantie"]}),e[23]=D):D=e[23];let S;e[24]===Symbol.for("react.memo_cache_sentinel")?(S=new Te(ze({entryDate:Oe().superRefine(de({label:"Date où l'assurance commence",fieldType:"datepicker",inputProps:{required:!1}})),LeaseEffectiveDate:Pe().refine(Ct,"La date d'effet du bail ne peut pas être dans le passé").refine(kt,"La date d'effet du bail ne peut pas être dans plus de 110 jours").superRefine(de({label:"Quelle est la date d'effet du bail ? (date d'entrée dans les lieux du locataire)",description:"Les loyers impayés seront couverts à partir de cette date.",fieldType:"datepicker",inputProps:{required:!1}}))})),e[24]=S):S=e[24];let C;e[25]!==i?(C=s.jsx(Fe,{schema:S,withSubmit:!0,onSubmit:i,id:"approveGuarantee"}),e[25]=i,e[26]=C):C=e[26];let L;e[27]!==m||e[28]!==C?(L=s.jsx(He,{open:m,onOpenChange:j,title:"Ajouter un locataire",mobileHeight:"auto",mobileModalSide:"bottom",size:"xl",height:"auto",padding:"xl",content:C}),e[27]=m,e[28]=C,e[29]=L):L=e[29];let I;e[30]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsxs(B,{variant:"outline",className:"border-border hover:bg-accent/50 text-foreground bg-transparent",children:[s.jsx(ne,{className:"mr-2 h-4 w-4"}),"Télécharger le certificat"]}),e[30]=I):I=e[30];let P;e[31]!==L?(P=s.jsxs("div",{className:"flex flex-wrap gap-3",children:[D,L,I]}),e[31]=L,e[32]=P):P=e[32];let E;e[33]!==_||e[34]!==P?(E=s.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[v,s.jsxs("div",{className:"flex-1",children:[A,_,P]})]}),e[33]=_,e[34]=P,e[35]=E):E=e[35];let T;e[36]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsxs("div",{className:"flex items-center justify-end text-sm text-muted-foreground mb-1",children:[s.jsx(ae,{className:"mr-1 h-4 w-4"}),"Échéance"]}),e[36]=T):T=e[36];let G;e[37]!==d?(G=d?.guaranteeDeadline?new Date(d.guaranteeDeadline).toLocaleDateString("fr-FR"):"-",e[37]=d,e[38]=G):G=e[38];let O;e[39]!==G?(O=s.jsx("div",{className:"text-2xl font-bold text-foreground",children:G}),e[39]=G,e[40]=O):O=e[40];let k;e[41]!==d?(k=d?.guaranteeDeadline?ie(new Date(d.guaranteeDeadline)):"",e[41]=d,e[42]=k):k=e[42];let R;e[43]!==k?(R=s.jsx("div",{className:"text-sm text-muted-foreground",children:k}),e[43]=k,e[44]=R):R=e[44];let M;e[45]!==O||e[46]!==R?(M=s.jsxs("div",{className:"text-right flex-shrink-0",children:[T,O,R]}),e[45]=O,e[46]=R,e[47]=M):M=e[47];let z;return e[48]!==E||e[49]!==M?(z=s.jsxs("div",{className:"rounded-lg border border-primary/20 bg-primary/5 p-6 md:p-8 flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6 mb-8 shadow-sm",children:[E,M]}),e[48]=E,e[49]=M,e[50]=z):z=e[50],z};function It(e){return!e}function Ct(e){return new Date(e)>=new Date}function kt(e){return new Date(e)<=new Date(Date.now()+9504e6)}const Mt=()=>{const e=H.c(36),t=K(),a=Y();let r;e[0]!==t?(r=X({data:{},params:{}},t),e[0]=t,e[1]=r):r=e[1];const l=r,{data:f}=V(l);let p;e[2]!==f?.id||e[3]!==t||e[4]!==a.ID_rentalapproval?(p=q({data:{},params:{rentalApprovalId:a.ID_rentalapproval,subscriptionId:f?.id}},t),e[2]=f?.id,e[3]=t,e[4]=a.ID_rentalapproval,e[5]=p):p=e[5];const x=p,b=!!a.ID_rentalapproval&&!!f?.id;let u;e[6]!==x||e[7]!==b?(u={...x,enabled:b},e[6]=x,e[7]=b,e[8]=u):u=e[8];const{data:d}=V(u),n=d?.updateDate;let h,c,o,i,m,y,g;if(e[9]!==n){const A=new Date(n);h="rounded-lg border border-amber-200 bg-amber-50 p-6 md:p-8 flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6 mb-8 shadow-sm";let w;e[17]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("div",{className:"rounded-full bg-amber-500 p-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",children:s.jsxs("g",{fill:"#fffefe",children:[s.jsx("path",{d:"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"}),s.jsx("path",{d:"M25 12h-2v12l10.49 6.3 1.02-1.7L25 22.5V12z"})]})})}),e[17]=w):w=e[17];let _;e[18]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Demande en cours de traitement"}),e[18]=_):_=e[18];let D;e[19]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[_,s.jsxs(F,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-200",children:[s.jsx(se,{className:"mr-1 h-3 w-3"}),"En attente"]})]}),e[19]=D):D=e[19];let S;e[20]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsxs("p",{className:"text-muted-foreground mb-4",children:["Votre demande de certification est en cours d'examen par nos équipes. Vous recevrez une notification dès que la décision sera prise. ",s.jsx("span",{className:"font-medium text-foreground",children:"Temps de traitement estimé : 1 jours ouvrés"})]}),e[20]=S):S=e[20];let C;e[21]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsxs(B,{disabled:!0,className:"bg-muted text-muted-foreground cursor-not-allowed",children:[s.jsx(le,{className:"mr-2 h-4 w-4"}),"En attente d'approbation"]}),e[21]=C):C=e[21],e[22]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[w,s.jsxs("div",{className:"flex-1",children:[D,S,s.jsxs("div",{className:"flex flex-wrap gap-3",children:[C,s.jsxs(B,{variant:"outline",disabled:!0,className:"border-border text-muted-foreground cursor-not-allowed bg-transparent",children:[s.jsx(ne,{className:"mr-2 h-4 w-4"}),"Certificat non disponible"]})]})]})]}),e[22]=c):c=e[22],m="text-right flex-shrink-0",e[23]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsxs("div",{className:"flex items-center justify-end text-sm text-muted-foreground mb-1",children:[s.jsx(ae,{className:"mr-1 h-4 w-4"}),"Soumise le"]}),e[23]=y):y=e[23],g=s.jsx("div",{className:"text-2xl font-bold text-amber-600",children:A.toLocaleDateString("fr-FR")}),o="text-sm text-muted-foreground",i=ie(A),e[9]=n,e[10]=h,e[11]=c,e[12]=o,e[13]=i,e[14]=m,e[15]=y,e[16]=g}else h=e[10],c=e[11],o=e[12],i=e[13],m=e[14],y=e[15],g=e[16];let j;e[24]!==o||e[25]!==i?(j=s.jsx("div",{className:o,children:i}),e[24]=o,e[25]=i,e[26]=j):j=e[26];let v;e[27]!==j||e[28]!==m||e[29]!==y||e[30]!==g?(v=s.jsxs("div",{className:m,children:[y,g,j]}),e[27]=j,e[28]=m,e[29]=y,e[30]=g,e[31]=v):v=e[31];let N;return e[32]!==h||e[33]!==c||e[34]!==v?(N=s.jsxs("div",{className:h,children:[c,v]}),e[32]=h,e[33]=c,e[34]=v,e[35]=N):N=e[35],N},Lt=()=>{const e=H.c(3);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"rounded-full bg-red-500 p-3",children:s.jsx(fe,{className:"h-12 w-12 text-white"})}),e[0]=t):t=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Demande rejetée"}),e[1]=a):a=e[1];let r;return e[2]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-6 md:p-8 flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6 mb-8 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[t,s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a,s.jsxs(F,{variant:"destructive",className:"bg-red-100 text-red-800 border-red-200",children:[s.jsx(fe,{className:"mr-1 h-3 w-3"}),"Rejetée"]})]}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Votre demande de certification a été refusée."})]})]})}),e[2]=r):r=e[2],r},Rt=()=>{const e=H.c(3);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"rounded-full bg-gray-500 p-3",children:s.jsx(pe,{className:"h-12 w-12 text-white"})}),e[0]=t):t=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Demande annulée"}),e[1]=a):a=e[1];let r;return e[2]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-6 md:p-8 flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6 mb-8 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[t,s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a,s.jsxs(F,{variant:"secondary",className:"bg-gray-100 text-gray-800 border-gray-200",children:[s.jsx(pe,{className:"mr-1 h-3 w-3"}),"Annulée"]})]}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Votre demande de certification a été annulée."})]})]})}),e[2]=r):r=e[2],r},$t=()=>{const e=H.c(37),t=K(),a=Y();let r;e[0]!==t?(r=X({data:{},params:{}},t),e[0]=t,e[1]=r):r=e[1];const l=r,{data:f}=V(l);let p;e[2]!==f?.id||e[3]!==t||e[4]!==a.ID_rentalapproval?(p=q({data:{},params:{rentalApprovalId:a.ID_rentalapproval,subscriptionId:f?.id}},t),e[2]=f?.id,e[3]=t,e[4]=a.ID_rentalapproval,e[5]=p):p=e[5];const x=p,b=!!a.ID_rentalapproval&&!!f?.id;let u;e[6]!==x||e[7]!==b?(u={...x,enabled:b},e[6]=x,e[7]=b,e[8]=u):u=e[8];const{data:d}=V(u);let n,h,c,o,i,m,y;if(e[9]!==d){const N=d?.policy?.entryDate?new Date(d.policy.entryDate):d?.effectiveDate?new Date(d.effectiveDate):d?.updateDate?new Date(d.updateDate):void 0;y="rounded-lg border border-green-500/20 bg-green-50 p-6 md:p-8 flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6 mb-8 shadow-sm";let A;e[17]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx("div",{className:"rounded-full bg-primary p-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 48 48",children:s.jsxs("g",{fill:"#fffefe",children:[s.jsx("path",{d:"M32.707 22.707a1 1 0 0 0-1.414-1.414L24 28.586l-3.293-3.293a1 1 0 0 0-1.414 1.414L24 31.414z"}),s.jsx("path",{fillRule:"evenodd",d:"M38 15v21a3 3 0 0 1-3 3H17a3 3 0 0 1-3-3V8a3 3 0 0 1 3-3h11zm-10 1a1 1 0 0 1-1-1V7H17a1 1 0 0 0-1 1v28a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V16zm1-7.172L34.172 14H29z",clipRule:"evenodd"}),s.jsx("path",{d:"M12 11v27a3 3 0 0 0 3 3h19v2H15a5 5 0 0 1-5-5V11z"})]})})}),e[17]=A):A=e[17];let w;e[18]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"GLI activé avec succès !"}),e[18]=w):w=e[18];let _,D;e[19]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[w,s.jsxs(F,{variant:"default",children:[s.jsx(re,{className:"mr-1 h-3 w-3"}),"Activé"]})]}),D=s.jsx("p",{className:"text-muted-foreground mb-4",children:"Votre service est désormais actif et opérationnel."}),e[19]=_,e[20]=D):(_=e[19],D=e[20]),e[21]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[A,s.jsxs("div",{className:"flex-1",children:[_,D,s.jsx("div",{className:"flex flex-wrap gap-3",children:s.jsxs(B,{variant:"outline",className:"border-border hover:bg-accent/50 text-foreground bg-transparent",children:[s.jsx(ne,{className:"mr-2 h-4 w-4"}),"Télécharger le certificat"]})})]})]}),e[21]=n):n=e[21],o="text-right flex-shrink-0",e[22]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsxs("div",{className:"flex items-center justify-end text-sm text-muted-foreground mb-1",children:[s.jsx(ae,{className:"mr-1 h-4 w-4"}),"Activée le"]}),e[22]=i):i=e[22];const S=N?N.toLocaleDateString("fr-FR"):"-";e[23]!==S?(m=s.jsx("div",{className:"text-2xl font-bold text-foreground",children:S}),e[23]=S,e[24]=m):m=e[24],h="text-sm text-muted-foreground",c=N?ie(N):"",e[9]=d,e[10]=n,e[11]=h,e[12]=c,e[13]=o,e[14]=i,e[15]=m,e[16]=y}else n=e[10],h=e[11],c=e[12],o=e[13],i=e[14],m=e[15],y=e[16];let g;e[25]!==h||e[26]!==c?(g=s.jsx("div",{className:h,children:c}),e[25]=h,e[26]=c,e[27]=g):g=e[27];let j;e[28]!==g||e[29]!==o||e[30]!==i||e[31]!==m?(j=s.jsxs("div",{className:o,children:[i,m,g]}),e[28]=g,e[29]=o,e[30]=i,e[31]=m,e[32]=j):j=e[32];let v;return e[33]!==n||e[34]!==j||e[35]!==y?(v=s.jsxs("div",{className:y,children:[n,j]}),e[33]=n,e[34]=j,e[35]=y,e[36]=v):v=e[36],v},Et=()=>{const e=H.c(3);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"rounded-full bg-gray-400 p-3 flex items-center justify-center",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:48,height:48,viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M18 6L6 18"}),s.jsx("path",{d:"M6 6l12 12"})]})}),e[0]=t):t=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"GLI terminé"}),e[1]=a):a=e[1];let r;return e[2]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("div",{className:"rounded-lg border border-gray-400/20 bg-gray-50 p-6 md:p-8 flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6 mb-8 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[t,s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a,s.jsxs(F,{variant:"secondary",className:"",children:[s.jsx(Ve,{className:"mr-1 h-3 w-3"}),"Terminé"]})]}),s.jsx("p",{className:"text-muted-foreground",children:"Cette demande est maintenant clôturée."})]})]})}),e[2]=r):r=e[2],r},Gt=e=>{const t=H.c(8),{status:a}=e;if([$.PendingDocument,$.Initialized,$.Draft].includes(a)){let l;return t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(Nt,{}),t[0]=l):l=t[0],l}if($.Pending===a){let l;return t[1]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(Mt,{}),t[1]=l):l=t[1],l}if($.Approved===a){let l;return t[2]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(At,{}),t[2]=l):l=t[2],l}if($.Rejected===a){let l;return t[3]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(Lt,{}),t[3]=l):l=t[3],l}if($.Cancelled===a){let l;return t[4]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(Rt,{}),t[4]=l):l=t[4],l}if($.Active===a){let l;return t[5]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx($t,{}),t[5]=l):l=t[5],l}if([$.Finished,$.FinishedScheduled].includes(a)){let l;return t[6]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(Et,{}),t[6]=l):l=t[6],l}let r;return t[7]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx(s.Fragment,{}),t[7]=r):r=t[7],r},Tt=ge("rentalapprovals/cancelGliUsecase",async(e,{dispatch:t,extra:a})=>{const{queryClient:r,rentalApprovalApi:l}=a;try{const f=q({data:{},params:{rentalApprovalId:e.params.rentalApprovalId,subscriptionId:e.params.subscriptionId}},t);await l.postCancelGli(e),r.invalidateQueries({queryKey:["rentalApprovals","subscription",e.params.subscriptionId],exact:!1}),r.invalidateQueries(f);return}catch(f){throw t(be({typeMessage:je.errorApi})),f}}),zt=e=>ve({mutationKey:["cancelGli"],mutationFn:async t=>await e?.(Tt(t)).unwrap()}),Pt=e=>{const t=H.c(26),{ref:a,trigger:r,title:l,description:f,onSubmit:p,disabled:x,isLoading:b}=e,[u,d]=me.useState(!1);let n;t[0]!==u?(n=()=>({isOpen:u,openDialog:()=>d(!0),closeDialog:()=>d(!1)}),t[0]=u,t[1]=n):n=t[1];let h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=[],t[2]=h):h=t[2],me.useImperativeHandle(a,n,h);let c;t[3]!==r?(c=r&&s.jsx(Be,{asChild:!0,children:r}),t[3]=r,t[4]=c):c=t[4];let o;t[5]!==l?(o=s.jsx(qe,{children:l}),t[5]=l,t[6]=o):o=t[6];let i;t[7]!==f?(i=s.jsx(Qe,{children:f}),t[7]=f,t[8]=i):i=t[8];let m;t[9]!==o||t[10]!==i?(m=s.jsxs(Ue,{children:[o,i]}),t[9]=o,t[10]=i,t[11]=m):m=t[11];let y;t[12]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(Ke,{children:"Fermer"}),t[12]=y):y=t[12];let g;t[13]!==x||t[14]!==b||t[15]!==p?(g=p&&s.jsxs(Xe,{onClick:p,disabled:x,children:[b&&s.jsx(Ye,{}),"Continuer"]}),t[13]=x,t[14]=b,t[15]=p,t[16]=g):g=t[16];let j;t[17]!==g?(j=s.jsxs(Ze,{children:[y,g]}),t[17]=g,t[18]=j):j=t[18];let v;t[19]!==m||t[20]!==j?(v=s.jsxs(We,{children:[m,j]}),t[19]=m,t[20]=j,t[21]=v):v=t[21];let N;return t[22]!==u||t[23]!==v||t[24]!==c?(N=s.jsxs(Je,{open:u,onOpenChange:d,children:[c,v]}),t[22]=u,t[23]=v,t[24]=c,t[25]=N):N=t[25],N},Bt=function(){const t=H.c(56),a=K(),r=Y();let l;t[0]!==a?(l=X({data:{},params:{}},a),t[0]=a,t[1]=l):l=t[1];const f=l,{data:p}=V(f);let x;t[2]!==p?.id||t[3]!==a||t[4]!==r.ID_rentalapproval?(x=q({data:{},params:{rentalApprovalId:r.ID_rentalapproval,subscriptionId:p?.id}},a),t[2]=p?.id,t[3]=a,t[4]=r.ID_rentalapproval,t[5]=x):x=t[5];const b=x,u=!!r.ID_rentalapproval&&!!p?.id;let d;t[6]!==b||t[7]!==u?(d={...b,enabled:u},t[6]=b,t[7]=u,t[8]=d):d=t[8];const{data:n}=V(d);let h;t[9]!==a?(h=zt(a),t[9]=a,t[10]=h):h=t[10];const o=ye(h);let i;t[11]!==o||t[12]!==p?.id||t[13]!==r.ID_rentalapproval?(i=async()=>{await o.mutateAsync({data:{},params:{rentalApprovalId:r.ID_rentalapproval,subscriptionId:p?.id}})},t[11]=o,t[12]=p?.id,t[13]=r.ID_rentalapproval,t[14]=i):i=t[14];const m=i;let y;t[15]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(et,{}),t[15]=y):y=t[15];let g;t[16]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Demande de certification"}),t[16]=g):g=t[16];const j=n?.references?.rentalApprovalRef,v=n?.references?.policyRef,N=n?.createDate;let A;t[17]!==N?(A=new Date(N).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),t[17]=N,t[18]=A):A=t[18];let w;t[19]!==A||t[20]!==j||t[21]!==v?(w=s.jsxs("div",{children:[g,s.jsxs("p",{className:"text-muted-foreground text-sm mt-1",children:[j," ","• ",v," • Créée le"," ",A]})]}),t[19]=A,t[20]=j,t[21]=v,t[22]=w):w=t[22];let _;t[23]!==o.isPending||t[24]!==m||t[25]!==n?.status?(_=[$.Pending,$.PendingDocument,$.Initialized,$.Draft].includes(n?.status)&&s.jsx(Pt,{trigger:s.jsxs(B,{variant:"outline",className:"text-destructive border-destructive hover:bg-destructive/10 bg-transparent",size:"sm",children:[s.jsx(pt,{className:"mr-2 h-4 w-4"}),"Annuler la demande"]}),title:"Confirmer l'annulation",description:"Êtes-vous sûr de vouloir annuler cette demande de certification ? Cette action est irréversible.",onSubmit:m,disabled:o.isPending,isLoading:o.isPending}),t[23]=o.isPending,t[24]=m,t[25]=n?.status,t[26]=_):_=t[26];let D;t[27]!==_?(D=s.jsx("div",{className:"flex items-center space-x-2 flex-wrap gap-2 md:gap-0",children:_}),t[27]=_,t[28]=D):D=t[28];let S;t[29]!==w||t[30]!==D?(S=s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0 mb-8",children:[w,D]}),t[29]=w,t[30]=D,t[31]=S):S=t[31];const C=n?.status;let L;t[32]!==C?(L=s.jsx(Gt,{status:C}),t[32]=C,t[33]=L):L=t[33];let I;t[34]!==n?.owners?(I=n?.owners??[],t[34]=n?.owners,t[35]=I):I=t[35];const P=n?.realEstateLot;let E;t[36]!==I||t[37]!==P?(E=s.jsx(gt,{owners:I,realEstateLot:P}),t[36]=I,t[37]=P,t[38]=E):E=t[38];let T;t[39]!==n?.tenants?(T=n?.tenants??[],t[39]=n?.tenants,t[40]=T):T=t[40];let G;t[41]!==T?(G=s.jsx(jt,{tenants:T}),t[41]=T,t[42]=G):G=t[42];const O=n?.businessData;let k;t[43]!==O?(k=s.jsx(yt,{businessData:O}),t[43]=O,t[44]=k):k=t[44];let R;t[45]!==E||t[46]!==G||t[47]!==k?(R=s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[E,G,k]}),t[45]=E,t[46]=G,t[47]=k,t[48]=R):R=t[48];let M;t[49]!==n?.status?(M=![$.Initialized,$.Draft].includes(n?.status)&&s.jsx(ft,{}),t[49]=n?.status,t[50]=M):M=t[50];let z;return t[51]!==S||t[52]!==L||t[53]!==R||t[54]!==M?(z=s.jsxs(tt,{children:[y,s.jsx("div",{className:"flex flex-1 flex-col",children:s.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2",children:s.jsxs("div",{className:"py-8 px-4 md:px-6",children:[S,L,R,M]})})})]}),t[51]=S,t[52]=L,t[53]=R,t[54]=M,t[55]=z):z=t[55],z};export{Bt as component};
