import{c as k,d as O,bg as V,b as q,q as w,aZ as E,e as Q,g as T,b5 as j,i as P}from"./client-snyaW0Tu.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],ee=k("Building2",B);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ae=k("Shield",L);function F(){const e=O.c(1);let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a={strict:!1},e[0]=a):a=e[0],V(a).params}const H=q("rentalApprovals/retrieveSubscriptionRentalApprovalsUsecase",async(e,{dispatch:a,extra:t})=>{const{rentalApprovalApi:s}=t;try{return(await s.getSubscriptionRentalApprovals({data:{},params:{rentalApprovalId:e.params.rentalApprovalId,subscriptionId:e.params.subscriptionId}})).payload}catch(r){throw r}}),te=(e,a)=>w({queryKey:["subscription",e.params.subscriptionId,"rentalApproval",e.params.rentalApprovalId],queryFn:async()=>await a?.(H(e)).unwrap()});var K=(e=>(e[e.Owner=1]="Owner",e[e.Tenant=2]="Tenant",e[e.Guarantor=3]="Guarantor",e))(K||{}),h=(e=>(e[e.Uploading=0]="Uploading",e[e.Uploaded=1]="Uploaded",e[e.Validating=2]="Validating",e[e.ManualValid=3]="ManualValid",e[e.AutoValid=4]="AutoValid",e[e.ManualRefuse=5]="ManualRefuse",e[e.AutoRefuse=6]="AutoRefuse",e[e.Removed=7]="Removed",e[e.DoubleCheck=8]="DoubleCheck",e[e.ErrorUpload=9]="ErrorUpload",e[e.Creating=10]="Creating",e))(h||{});const re=["image/jpeg","image/gif","image/png","application/pdf","image/heic"],ne=10,N=q("documents/retrieveMandatoryDocumentsUsecase",async(e,{dispatch:a,extra:t})=>{const{documentsApi:s}=t;try{return(await s.getMandatoryDocuments({data:{},params:e.params})).payload}catch(r){throw r}}),Z=(e,a)=>w({queryKey:["mandatory-documents","subscription",e.params.subscriptionId,"rentalApproval",e.params.rentalApprovalId],queryFn:async()=>await a?.(N(e)).unwrap()}),$=E("LIST_DOCUMENT_LOADED"),z=q("document/retrieveDocumentUsecase",async(e,{dispatch:a,extra:t})=>{const{documentsApi:s}=t;try{const r=await s.listDocuments({data:{},params:e.params});return a($({documents:r.payload,params:e.params})),r.payload}catch(r){throw r}}),Y=(e,a)=>w({queryKey:["documents",e.params.selectId],queryFn:async()=>await a?.(z({data:{},params:e.params})).unwrap()}),R=new Set([h.Uploading,h.Uploaded,h.Validating,h.ManualValid,h.AutoValid,h.DoubleCheck,h.Creating]);function J(e,a){return!a||!a.others?[]:a.others.map(t=>{const s=t.requestedDocument.type,p=e.filter(c=>c.documentType===s&&R.has(c.status)).map(c=>{const n=a.rejectedDocuments.find(o=>o.documentId===c.id);return{...c,reason:n?.reason}}),u=p.filter(c=>!c.reason).length;return{...t,uploadedDocuments:p,count:u,isComplete:u>=t.minRequired}})}function W(e,a){return a?a.entitiesMandatoryDocuments.map(t=>{const s=t.person.id,r=t.requiredDocuments.map(n=>{const o=n.requestedDocument.type,v=e.filter(d=>d.ownerProfileId===s&&d.documentType===o&&R.has(d.status)).map(d=>{const m=a.rejectedDocuments.find(f=>f.documentId===d.id);return{...d,reason:m?.reason}}),i=v.filter(d=>!d.reason).length;return{...n,uploadedDocuments:v,count:i,isComplete:i>=n.minRequired}}),p=r.filter(n=>n.isComplete).length,y=r.length,u=r.reduce((n,o)=>n+o.count,0),c=r.reduce((n,o)=>n+o.minRequired,0);return{...t,requiredDocuments:r,completedTypes:p,totalTypes:y,totalUploaded:u,totalRequired:c}}):[]}const se=()=>{const e=O.c(33),a=Q(),t=F();let s;e[0]!==a?(s=P({data:{},params:{}},a),e[0]=a,e[1]=s):s=e[1];const r=s,{data:p}=T(r);let y;e[2]!==a||e[3]!==t.ID_rentalapproval||e[4]!==p?.id?(y=Z({data:{},params:{rentalApprovalId:t.ID_rentalapproval,subscriptionId:p?.id}},a),e[2]=a,e[3]=t.ID_rentalapproval,e[4]=p?.id,e[5]=y):y=e[5];const u=y,c=p?.id;let n;e[6]!==a||e[7]!==t.ID_rentalapproval||e[8]!==c?(n=Y({params:{selectId:t.ID_rentalapproval,rentalApprovalId:t.ID_rentalapproval,subscriptionId:c,documentHolderType:j.MilaTenant}},a),e[6]=a,e[7]=t.ID_rentalapproval,e[8]=c,e[9]=n):n=e[9];const o=n,I=!!p?.id;let v;e[10]!==o||e[11]!==I?(v={...o,enabled:I},e[10]=o,e[11]=I,e[12]=v):v=e[12];const{data:l}=T(v),{data:i}=T(u);let d,m;e[13]!==l?(m=l||[],e[13]=l,e[14]=m):m=e[14];let f;e[15]!==i||e[16]!==m?(f=W(m,i),e[15]=i,e[16]=m,e[17]=f):f=e[17],d=f;const D=d;let C,g;e[18]!==l?(g=l||[],e[18]=l,e[19]=g):g=e[19];let A;e[20]!==i||e[21]!==g?(A=J(g,i),e[20]=i,e[21]=g,e[22]=A):A=e[22],C=A;const _=C;let b;e[23]!==D?(b=()=>!(D.filter(G).length>0),e[23]=D,e[24]=b):b=e[24];const U=b;let M;return e[25]!==l||e[26]!==i||e[27]!==D||e[28]!==_||e[29]!==u||e[30]!==o||e[31]!==U?(M={mergeDocuments:D,othersDocuments:_,documents:l,documentsMandatory:i,mandatoryDocumentQueryOption:u,documentsQueryOption:o,validateDocuments:U},e[25]=l,e[26]=i,e[27]=D,e[28]=_,e[29]=u,e[30]=o,e[31]=U,e[32]=M):M=e[32],M};function X(e){return e.count<e.minRequired}function G(e){return e.requiredDocuments.some(X)}export{re as A,ee as B,h as D,K as G,ae as S,F as a,Y as b,ne as c,te as r,se as u};
